
#
# Mac
#
brew update
brew install pyenv
brew install pyenv-virtualenv
xcode-select --install
#
# Other
#
git clone https://github.com/pyenv/pyenv.git ~/.pyenv
git clone https://github.com/pyenv/pyenv-virtualenv.git \
    ~/.pyenv/plugins-virtualenv

source ~/.bash_profile  # see dotfiles repo

# after installing python2 and 3; or, substitute other versions
CFLAGS="-O2" pyenv install $(python2 --version 2>&1 | sed 's/^.* //')
CFLAGS="-O2" pyenv install $(python3 --version 2>&1 | sed 's/^.* //')

# this doesn't work properly on Mac; use venvs and manual symlinks instead
#pyenv deactivate
#pip3 install virtualenv
#curl https://raw.githubusercontent.com/mitsuhiko/pipsi/master/get-pipsi.py | python3

# consider removing these from the main system:
#flake8
#autopep8

py3ver="3.6.5"  # or whatever
py2ver="2.7.14"  # or whatever
#
pyinst flake8 "$py3ver"  # see dot.bashrc.d/python.post
pyinst tox "$py3ver"
pyinst pytest "$py3ver"
pyinst nose "$py3ver"
pyinst coverage "$py3ver"
pyinst sphinx "$py2ver"
#
pyenv activate "flake8-$py3ver"
pip3 install flake8-import-order
pip3 install autopep8
pyenv activate "pytest-$py3ver"
pip3 install pytest-cov
pyenv activate "sphinx-$py2ver"
pip2 install sphinx-autobuild
pip2 install recommonmark
pyenv deactivate
#
cd ~/bin
ln -s "../.pyenv/versions/flake8-${py3ver}/bin/pycodestyle" .
ln -s "../.pyenv/versions/flake8-${py3ver}/bin/pyflakes" .
ln -s "../.pyenv/versions/tox-${py3ver}/bin/tox-quickstart" .
ln -s "../.pyenv/versions/pytest-${py3ver}/bin/py.test" .
ln -s "../.pyenv/versions/nose-${py3ver}/bin/nosetests" .
ln -s "../.pyenv/versions/nose-${py3ver}/bin/nosetests-3.4" .
ln -s "../.pyenv/versions/coverage-${py3ver}/bin/coverage-3.6" .
ln -s "../.pyenv/versions/coverage-${py3ver}/bin/coverage3" .
# more from sphinx?
ln -s "../.pyenv/versions/sphinx-${py2ver}/bin/sphinx-{apidoc,autogen,build,quickstart,autobuild} .
rm nose
cd

prompt display
